!function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var r=l(a);const o=["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","application/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp2"],n=["image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/vnd.microsoft.icon","image/tiff","image/webp"],m=t=>{const{name:a,path:l,mimeType:m,width:i}=t;if(l&&l.length){if(m&&n.includes(m))return r.default.createElement("img",{src:l,style:{maxHeight:i,maxWidth:i},alt:a});if(m&&o.includes(m))return r.default.createElement("audio",{controls:!0,src:l},"Your browser does not support the",r.default.createElement("code",null,"audio"),r.default.createElement("track",{kind:"captions"}))}return r.default.createElement(e.Box,null,r.default.createElement(e.Button,{as:"a",href:l,ml:"default",size:"sm",rounded:!0,target:"_blank"},r.default.createElement(e.Icon,{icon:"DocumentDownload",color:"white",mr:"default"}),a))},i=({width:e,record:a,property:l})=>{const{custom:o}=l;let n=t.flat.get(a?.params,o.filePathProperty);if(!n)return null;const i=t.flat.get(a?.params,o.fileNameProperty?o.fileNameProperty:o.keyProperty),p=o.mimeTypeProperty&&t.flat.get(a?.params,o.mimeTypeProperty);if(!l.custom.multiple)return o.opts&&o.opts.baseUrl&&(n=`${o.opts.baseUrl}/${i}`),r.default.createElement(m,{path:n,name:i,width:e,mimeType:p});if(o.opts&&o.opts.baseUrl){const e=o.opts.baseUrl||"";n=n.map(((t,a)=>`${e}/${i[a]}`))}return r.default.createElement(r.default.Fragment,null,n.map(((t,a)=>r.default.createElement(m,{key:t,path:t,name:i[a],width:e,mimeType:p[a]}))))};AdminJS.UserComponents={},AdminJS.UserComponents.UploadEditComponent=({property:l,record:o,onChange:n})=>{const{translateProperty:m}=t.useTranslation(),{params:i}=o,{custom:p}=l,u=t.flat.get(i,p.filePathProperty),s=t.flat.get(i,p.keyProperty),d=t.flat.get(i,p.fileProperty),[f,c]=a.useState(s),[g,y]=a.useState([]);a.useEffect((()=>{("string"==typeof s&&s!==f||"string"!=typeof s&&!f||"string"!=typeof s&&Array.isArray(s)&&s.length!==f.length)&&(c(s),y([]))}),[s,f]);return r.default.createElement(e.FormGroup,null,r.default.createElement(e.Label,null,m(l.label,l.resourceId)),r.default.createElement(e.DropZone,{onChange:e=>{y(e),n(p.fileProperty,e)},multiple:p.multiple,validate:{mimeTypes:p.mimeTypes,maxSize:p.maxSize},files:g}),!p.multiple&&s&&u&&!g.length&&null!==d&&r.default.createElement(e.DropZoneItem,{filename:s,src:u,onRemove:()=>{n(p.fileProperty,null)}}),p.multiple&&s&&s.length&&u?r.default.createElement(r.default.Fragment,null,s.map(((a,l)=>u[l]?r.default.createElement(e.DropZoneItem,{key:a,filename:a,src:u[l],onRemove:()=>(e=>{const a=(t.flat.get(o.params,p.keyProperty)||[]).indexOf(e),l=t.flat.get(o.params,p.filesToDeleteProperty)||[];if(u&&u.length>0){const e=u.map(((e,t)=>t!==a?e:null));let r=t.flat.set(o.params,p.filesToDeleteProperty,[...l,a]);r=t.flat.set(r,p.filePathProperty,e),n({...o,params:r})}else console.log("You cannot remove file when there are no uploaded files yet")})(a)}):""))):"")},AdminJS.UserComponents.UploadListComponent=e=>r.default.createElement(i,{width:100,...e}),AdminJS.UserComponents.UploadShowComponent=t=>{const{property:a}=t;return r.default.createElement(e.FormGroup,null,r.default.createElement(e.Label,null,a.label),r.default.createElement(i,{width:"100%",...t}))}}(AdminJSDesignSystem,AdminJS,React);
